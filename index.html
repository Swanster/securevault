<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0f0f1a">
    <meta name="description" content="SecureVault - Your secure password manager">
    <title>SecureVault - Password Manager</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üîê</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono&display=swap"
        rel="stylesheet">
    <!-- Crypto polyfill for HTTP connections -->
    <script>
        // Check if crypto.subtle is available (requires HTTPS or localhost)
        if (!window.crypto || !window.crypto.subtle) {
            console.warn('Web Crypto API not available. Using fallback for HTTP.');
            // We'll implement a fallback in crypto.js
            window.CRYPTO_FALLBACK_NEEDED = true;
        }
    </script>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="app-container">
        <!-- Setup Screen -->
        <div id="setup-screen" class="screen">
            <div class="logo">
                <div class="logo-icon">
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z" />
                    </svg>
                </div>
                <span class="logo-text">SecureVault</span>
            </div>
            <div class="card">
                <div class="card-header text-center">
                    <h2 class="card-title">Create Master Password</h2>
                    <p class="card-subtitle">This password will unlock all your saved passwords. Choose a strong one you
                        won't forget!</p>
                </div>
                <form id="setup-form">
                    <div class="form-group">
                        <label class="form-label">Master Password</label>
                        <div class="password-input-wrapper">
                            <input type="password" id="setup-password" class="form-input"
                                placeholder="Enter master password" required minlength="8">
                            <button type="button" class="password-toggle" data-target="setup-password">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                                    <circle cx="12" cy="12" r="3" />
                                </svg>
                            </button>
                        </div>
                        <div class="strength-meter">
                            <div class="strength-bar">
                                <div class="strength-fill" id="setup-strength-fill"></div>
                            </div>
                            <span class="strength-label" id="setup-strength-label">Enter a password</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Confirm Password</label>
                        <div class="password-input-wrapper">
                            <input type="password" id="setup-confirm" class="form-input"
                                placeholder="Confirm master password" required>
                            <button type="button" class="password-toggle" data-target="setup-confirm">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                                    <circle cx="12" cy="12" r="3" />
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password Hint (optional)</label>
                        <input type="text" id="setup-hint" class="form-input" placeholder="A hint to help you remember">
                        <p class="form-hint">This hint will be shown if you forget your password</p>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">Create Vault</button>
                    <div class="divider"
                        style="margin:16px 0;text-align:center;color:var(--text-muted);font-size:0.875rem">or</div>
                    <button type="button" class="btn btn-secondary btn-block" id="restore-from-cloud-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" />
                            <path d="M13.73 21a2 2 0 0 1-3.46 0" />
                        </svg>
                        Restore from Cloud Account
                    </button>
                </form>
            </div>
        </div>

        <!-- Login Screen -->
        <div id="login-screen" class="screen">
            <div class="logo">
                <div class="logo-icon">
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z" />
                    </svg>
                </div>
                <span class="logo-text">SecureVault</span>
            </div>
            <div class="card">
                <div class="card-header text-center">
                    <h2 class="card-title">Welcome Back</h2>
                    <p class="card-subtitle">Enter your master password to unlock</p>
                </div>
                <form id="login-form">
                    <div class="form-group">
                        <label class="form-label">Master Password</label>
                        <div class="password-input-wrapper">
                            <input type="password" id="login-password" class="form-input"
                                placeholder="Enter master password" required>
                            <button type="button" class="password-toggle" data-target="login-password">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                                    <circle cx="12" cy="12" r="3" />
                                </svg>
                            </button>
                        </div>
                        <p class="form-hint" id="password-hint-display"></p>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">Unlock</button>
                </form>
                <button id="biometric-login" class="biometric-btn hidden">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M17.81 4.47c-.08 0-.16-.02-.23-.06C15.66 3.42 14 3 12.01 3c-1.98 0-3.86.47-5.57 1.41-.24.13-.54.04-.68-.2-.13-.24-.04-.55.2-.68C7.82 2.52 9.86 2 12.01 2c2.13 0 3.99.47 6.03 1.52.25.13.34.43.21.67-.09.18-.26.28-.44.28zM3.5 9.72c-.1 0-.2-.03-.29-.09-.23-.16-.28-.47-.12-.7.99-1.4 2.25-2.5 3.75-3.27C9.98 4.04 14 4.03 17.15 5.65c1.5.77 2.76 1.86 3.75 3.25.16.22.11.54-.12.7-.23.16-.54.11-.7-.12-.9-1.26-2.04-2.25-3.39-2.94-2.87-1.47-6.54-1.47-9.4.01-1.36.7-2.5 1.7-3.4 2.96-.08.14-.23.21-.39.21zm6.25 12.07c-.13 0-.26-.05-.35-.15-.87-.87-1.34-1.43-2.01-2.64-.69-1.23-1.05-2.73-1.05-4.34 0-2.97 2.54-5.39 5.66-5.39s5.66 2.42 5.66 5.39c0 .28-.22.5-.5.5s-.5-.22-.5-.5c0-2.42-2.09-4.39-4.66-4.39-2.57 0-4.66 1.97-4.66 4.39 0 1.44.32 2.77.93 3.85.64 1.15 1.08 1.64 1.85 2.42.19.2.19.51 0 .71-.11.1-.24.15-.37.15zm7.17-1.85c-1.19 0-2.24-.3-3.1-.89-1.49-1.01-2.38-2.65-2.38-4.39 0-.28.22-.5.5-.5s.5.22.5.5c0 1.41.72 2.74 1.94 3.56.71.48 1.54.71 2.54.71.24 0 .64-.03 1.04-.1.27-.05.53.13.58.41.05.27-.13.53-.41.58-.57.11-1.07.12-1.21.12zM14.91 22c-.04 0-.09-.01-.13-.02-1.59-.44-2.63-1.03-3.72-2.1-1.4-1.39-2.17-3.24-2.17-5.22 0-1.62 1.38-2.94 3.08-2.94 1.7 0 3.08 1.32 3.08 2.94 0 1.07.93 1.94 2.08 1.94s2.08-.87 2.08-1.94c0-3.77-3.25-6.83-7.25-6.83-2.84 0-5.44 1.58-6.61 4.03-.39.81-.59 1.76-.59 2.8 0 .78.07 2.01.67 3.61.1.26-.03.55-.29.64-.26.1-.55-.04-.64-.29-.49-1.31-.73-2.61-.73-3.96 0-1.2.23-2.29.68-3.24 1.33-2.79 4.28-4.6 7.51-4.6 4.55 0 8.25 3.51 8.25 7.83 0 1.62-1.38 2.94-3.08 2.94s-3.08-1.32-3.08-2.94c0-1.07-.93-1.94-2.08-1.94s-2.08.87-2.08 1.94c0 1.71.66 3.31 1.87 4.51.95.94 1.86 1.46 3.27 1.85.27.07.42.35.35.61-.05.23-.26.38-.47.38z" />
                    </svg>
                </button>
            </div>
        </div>

        <!-- Vault Screen -->
        <div id="vault-screen" class="screen">
            <!-- Desktop Sidebar -->
            <aside class="sidebar">
                <div class="sidebar-logo">
                    <div class="sidebar-logo-icon">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z" />
                        </svg>
                    </div>
                    <span class="sidebar-logo-text">SecureVault</span>
                </div>
                <nav class="sidebar-nav">
                    <button class="sidebar-nav-item active" data-category="all">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="7" height="7" rx="1" />
                            <rect x="14" y="3" width="7" height="7" rx="1" />
                            <rect x="3" y="14" width="7" height="7" rx="1" />
                            <rect x="14" y="14" width="7" height="7" rx="1" />
                        </svg>
                        <span>All Items</span>
                    </button>
                    <button class="sidebar-nav-item" data-category="Social">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                            <circle cx="9" cy="7" r="4" />
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                            <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                        </svg>
                        <span>Social</span>
                    </button>
                    <button class="sidebar-nav-item" data-category="Work">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="2" y="7" width="20" height="14" rx="2" ry="2" />
                            <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16" />
                        </svg>
                        <span>Work</span>
                    </button>
                    <button class="sidebar-nav-item" data-category="Finance">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="1" y="4" width="22" height="16" rx="2" ry="2" />
                            <line x1="1" y1="10" x2="23" y2="10" />
                        </svg>
                        <span>Finance</span>
                    </button>
                    <button class="sidebar-nav-item" data-category="Shopping">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="9" cy="21" r="1" />
                            <circle cx="20" cy="21" r="1" />
                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" />
                        </svg>
                        <span>Shopping</span>
                    </button>
                    <button class="sidebar-nav-item" data-category="Other">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z" />
                        </svg>
                        <span>Other</span>
                    </button>
                </nav>
                <div class="sidebar-divider"></div>
                <nav class="sidebar-nav sidebar-nav-bottom">
                    <button class="sidebar-nav-item" id="sidebar-settings-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3" />
                            <path
                                d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" />
                        </svg>
                        <span>Settings</span>
                    </button>
                    <button class="sidebar-nav-item" id="sidebar-lock-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
                            <path d="M7 11V7a5 5 0 0 1 10 0v4" />
                        </svg>
                        <span>Lock Vault</span>
                    </button>
                </nav>
            </aside>

            <!-- Main Content -->
            <main class="main-content">
                <div class="main-header">
                    <div class="main-header-left">
                        <h1 class="header-title" id="vault-title">All Items</h1>
                        <span class="item-count" id="item-count">(0)</span>
                    </div>
                    <div class="main-header-right">
                        <div class="view-toggle">
                            <button class="view-btn" id="list-view-btn" title="List view">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="8" y1="6" x2="21" y2="6" />
                                    <line x1="8" y1="12" x2="21" y2="12" />
                                    <line x1="8" y1="18" x2="21" y2="18" />
                                    <line x1="3" y1="6" x2="3.01" y2="6" />
                                    <line x1="3" y1="12" x2="3.01" y2="12" />
                                    <line x1="3" y1="18" x2="3.01" y2="18" />
                                </svg>
                            </button>
                            <button class="view-btn active" id="grid-view-btn" title="Grid view">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="3" width="7" height="7" />
                                    <rect x="14" y="3" width="7" height="7" />
                                    <rect x="3" y="14" width="7" height="7" />
                                    <rect x="14" y="14" width="7" height="7" />
                                </svg>
                            </button>
                        </div>
                        <div class="header-actions">
                            <button id="settings-btn" class="btn btn-ghost btn-icon mobile-only" title="Settings">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <circle cx="12" cy="12" r="3" />
                                    <path
                                        d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" />
                                </svg>
                            </button>
                            <button id="lock-btn" class="btn btn-ghost btn-icon mobile-only" title="Lock">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
                                    <path d="M7 11V7a5 5 0 0 1 10 0v4" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="search-bar">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8" />
                        <path d="m21 21-4.35-4.35" />
                    </svg>
                    <input type="text" id="search-input" placeholder="Search passwords...">
                </div>
                <div class="category-tabs mobile-only" id="category-tabs">
                    <button class="category-tab active" data-category="all">All</button>
                    <button class="category-tab" data-category="Social">Social</button>
                    <button class="category-tab" data-category="Work">Work</button>
                    <button class="category-tab" data-category="Finance">Finance</button>
                    <button class="category-tab" data-category="Shopping">Shopping</button>
                    <button class="category-tab" data-category="Other">Other</button>
                </div>
                <div class="password-list" id="password-list"></div>
                <div class="empty-state hidden" id="empty-state">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
                        <path d="M7 11V7a5 5 0 0 1 10 0v4" />
                    </svg>
                    <h3>No passwords yet</h3>
                    <p>Tap the + button to add your first password</p>
                </div>
                <button id="add-btn" class="fab">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19" />
                        <line x1="5" y1="12" x2="19" y2="12" />
                    </svg>
                </button>
            </main>
        </div>


        <!-- Settings Screen -->
        <div id="settings-screen" class="screen">
            <div class="header">
                <button id="settings-back" class="btn btn-ghost btn-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="m15 18-6-6 6-6" />
                    </svg>
                </button>
                <h1 class="header-title">Settings</h1>
                <div style="width:48px"></div>
            </div>

            <!-- Security Audit Dashboard -->
            <div class="security-audit" id="security-audit">
                <div class="security-score">
                    <div class="score-circle good" id="audit-score-circle">
                        <span id="audit-score">--</span>
                    </div>
                    <div class="score-details">
                        <div class="score-title" id="audit-title">Password Health</div>
                        <div class="score-subtitle" id="audit-subtitle">Analyzing your passwords...</div>
                    </div>
                </div>
                <div class="security-stats">
                    <div class="security-stat">
                        <div class="stat-value" id="stat-total">0</div>
                        <div class="stat-label">Total</div>
                    </div>
                    <div class="security-stat">
                        <div class="stat-value good" id="stat-strong">0</div>
                        <div class="stat-label">Strong</div>
                    </div>
                    <div class="security-stat">
                        <div class="stat-value warning" id="stat-weak">0</div>
                        <div class="stat-label">Weak</div>
                    </div>
                    <div class="security-stat">
                        <div class="stat-value danger" id="stat-reused">0</div>
                        <div class="stat-label">Reused</div>
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <h3 class="settings-section-title">Cloud Account</h3>
                <div id="cloud-logged-out">
                    <p class="text-muted" style="margin-bottom:12px;font-size:0.875rem">Sign in to sync your vault
                        across all devices</p>
                    <button class="btn btn-primary btn-block" id="cloud-login-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" />
                            <path d="M13.73 21a2 2 0 0 1-3.46 0" />
                        </svg>
                        Sign In / Register
                    </button>
                </div>
                <div id="cloud-logged-in" class="hidden">
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <div class="settings-item-title" id="cloud-email">user@email.com</div>
                            <div class="settings-item-desc" id="sync-status">Last sync: Never</div>
                        </div>
                        <button class="btn btn-ghost" id="sync-now-btn" style="padding:8px">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M23 4v6h-6" />
                                <path d="M1 20v-6h6" />
                                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15" />
                            </svg>
                        </button>
                    </div>
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <div class="settings-item-title">Auto Sync</div>
                            <div class="settings-item-desc">Sync when changes are made</div>
                        </div>
                        <label class="toggle">
                            <input type="checkbox" id="auto-sync-toggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <button class="btn btn-secondary btn-block" id="cloud-logout-btn" style="margin-top:8px">
                        Sign Out
                    </button>
                </div>
            </div>

            <div class="settings-section">
                <h3 class="settings-section-title">Local Backup</h3>
                <button class="btn btn-secondary btn-block" id="export-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                        <polyline points="7 10 12 15 17 10" />
                        <line x1="12" y1="15" x2="12" y2="3" />
                    </svg>
                    Export Backup
                </button>
                <button class="btn btn-secondary btn-block" id="import-btn" style="margin-top:8px">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                        <polyline points="17 8 12 3 7 8" />
                        <line x1="12" y1="3" x2="12" y2="15" />
                    </svg>
                    Import Backup
                </button>
                <input type="file" id="import-file" accept=".json" class="hidden">
            </div>

            <div class="settings-section">
                <h3 class="settings-section-title">Import</h3>
                <button class="btn btn-secondary btn-block" id="import-lastpass-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                        <polyline points="14 2 14 8 20 8" />
                    </svg>
                    Import from LastPass
                </button>
                <input type="file" id="lastpass-file" accept=".csv" class="hidden">
            </div>

            <div class="settings-section">
                <h3 class="settings-section-title">Security</h3>
                <button class="btn btn-secondary btn-block" id="breach-check-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                        <path d="m9 12 2 2 4-4" />
                    </svg>
                    Check Passwords for Breaches
                </button>
                <button class="btn btn-secondary btn-block" id="change-password-btn" style="margin-top:8px">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
                        <path d="M7 11V7a5 5 0 0 1 10 0v4" />
                    </svg>
                    Change Master Password
                </button>
                <div class="settings-item" style="margin-top:12px">
                    <div class="settings-item-info">
                        <div class="settings-item-title">Biometric Unlock</div>
                        <div class="settings-item-desc">Use fingerprint to unlock</div>
                    </div>
                    <label class="toggle">
                        <input type="checkbox" id="biometric-toggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="settings-item">
                    <div class="settings-item-info">
                        <div class="settings-item-title">Auto-lock</div>
                        <div class="settings-item-desc">Lock after 5 minutes of inactivity</div>
                    </div>
                    <label class="toggle">
                        <input type="checkbox" id="autolock-toggle" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>

            <div class="settings-section">
                <h3 class="settings-section-title">Danger Zone</h3>
                <button class="btn btn-danger btn-block" id="reset-vault-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="3 6 5 6 21 6" />
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
                    </svg>
                    Reset Vault
                </button>
            </div>
        </div>
    </div>

    <!-- Add/Edit Modal -->
    <div class="modal-overlay" id="entry-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title" id="entry-modal-title">Add Password</h2>
                <button class="modal-close" id="entry-modal-close">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>
                </button>
            </div>
            <form id="entry-form">
                <input type="hidden" id="entry-id">
                <div class="form-group">
                    <label class="form-label">Name *</label>
                    <input type="text" id="entry-name" class="form-input" placeholder="e.g., Gmail, Facebook" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Website URL</label>
                    <input type="url" id="entry-url" class="form-input" placeholder="https://example.com">
                </div>
                <div class="form-group">
                    <label class="form-label">Username / Email</label>
                    <input type="text" id="entry-username" class="form-input" placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label class="form-label">Password *</label>
                    <div class="password-input-wrapper">
                        <input type="password" id="entry-password" class="form-input" placeholder="Enter password"
                            required>
                        <button type="button" class="password-toggle" data-target="entry-password">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                                <circle cx="12" cy="12" r="3" />
                            </svg>
                        </button>
                    </div>
                    <button type="button" class="btn btn-ghost" id="generate-password-btn"
                        style="margin-top:8px;padding:8px 12px;font-size:0.875rem">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path
                                d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4" />
                        </svg>
                        Generate
                    </button>
                </div>
                <div class="form-group">
                    <label class="form-label">Category</label>
                    <select id="entry-category" class="form-input">
                        <option value="Social">Social</option>
                        <option value="Work">Work</option>
                        <option value="Finance">Finance</option>
                        <option value="Shopping">Shopping</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Notes</label>
                    <textarea id="entry-notes" class="form-input" rows="3" placeholder="Additional notes..."></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="entry-cancel">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Password Generator Modal -->
    <div class="modal-overlay" id="generator-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Password Generator</h2>
                <button class="modal-close" id="generator-modal-close">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>
                </button>
            </div>
            <div class="generator-output">
                <span id="generated-password">Click generate</span>
            </div>
            <div class="strength-meter">
                <div class="strength-bar">
                    <div class="strength-fill" id="gen-strength-fill"></div>
                </div>
                <span class="strength-label" id="gen-strength-label"></span>
            </div>
            <div class="generator-length">
                <div class="length-display">
                    <span>Length</span>
                    <span id="length-value">16</span>
                </div>
                <input type="range" id="password-length" min="8" max="64" value="16">
            </div>
            <div class="generator-options">
                <label class="generator-option">
                    <input type="checkbox" id="gen-uppercase" checked>
                    <span>Uppercase (A-Z)</span>
                </label>
                <label class="generator-option">
                    <input type="checkbox" id="gen-lowercase" checked>
                    <span>Lowercase (a-z)</span>
                </label>
                <label class="generator-option">
                    <input type="checkbox" id="gen-numbers" checked>
                    <span>Numbers (0-9)</span>
                </label>
                <label class="generator-option">
                    <input type="checkbox" id="gen-symbols" checked>
                    <span>Symbols (!@#$)</span>
                </label>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="regenerate-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M23 4v6h-6" />
                        <path d="M1 20v-6h6" />
                        <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15" />
                    </svg>
                    Regenerate
                </button>
                <button class="btn btn-primary" id="use-password-btn">Use Password</button>
            </div>
        </div>
    </div>

    <!-- View Password Modal -->
    <div class="modal-overlay" id="view-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title" id="view-title">Entry Name</h2>
                <button class="modal-close" id="view-modal-close">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>
                </button>
            </div>
            <div class="form-group">
                <label class="form-label">Website</label>
                <div style="display:flex;gap:8px">
                    <input type="text" id="view-url" class="form-input" readonly>
                    <button class="btn btn-secondary btn-icon" id="open-url-btn" title="Open URL">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" />
                            <polyline points="15 3 21 3 21 9" />
                            <line x1="10" y1="14" x2="21" y2="3" />
                        </svg>
                    </button>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">Username</label>
                <div style="display:flex;gap:8px">
                    <input type="text" id="view-username" class="form-input" readonly>
                    <button class="btn btn-secondary btn-icon copy-btn" data-copy="view-username" title="Copy">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                        </svg>
                    </button>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">Password</label>
                <div style="display:flex;gap:8px">
                    <div class="password-input-wrapper" style="flex:1">
                        <input type="password" id="view-password" class="form-input" readonly>
                        <button type="button" class="password-toggle" data-target="view-password">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                                <circle cx="12" cy="12" r="3" />
                            </svg>
                        </button>
                    </div>
                    <button class="btn btn-secondary btn-icon copy-btn" data-copy="view-password" title="Copy">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                        </svg>
                    </button>
                </div>
            </div>
            <div class="form-group" id="view-notes-group">
                <label class="form-label">Notes</label>
                <textarea id="view-notes" class="form-input" rows="3" readonly></textarea>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger" id="delete-entry-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="3 6 5 6 21 6" />
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
                    </svg>
                    Delete
                </button>
                <button class="btn btn-primary" id="edit-entry-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" />
                    </svg>
                    Edit
                </button>
            </div>
        </div>
    </div>

    <!-- Cloud Login Modal -->
    <div class="modal-overlay" id="cloud-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title" id="cloud-modal-title">Sign In</h2>
                <button class="modal-close" id="cloud-modal-close">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>
                </button>
            </div>
            <form id="cloud-form">
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" id="cloud-email-input" class="form-input" placeholder="your@email.com" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <div class="password-input-wrapper">
                        <input type="password" id="cloud-password-input" class="form-input"
                            placeholder="Account password" required minlength="6">
                        <button type="button" class="password-toggle" data-target="cloud-password-input">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                                <circle cx="12" cy="12" r="3" />
                            </svg>
                        </button>
                    </div>
                    <p class="form-hint">This is your cloud account password (separate from master password)</p>
                </div>
                <div class="modal-footer" style="flex-direction:column;gap:8px">
                    <button type="submit" class="btn btn-primary btn-block" id="cloud-submit-btn">Sign In</button>
                    <button type="button" class="btn btn-ghost btn-block" id="cloud-toggle-mode">Don't have an account?
                        Register</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Change Password Modal -->
    <div class="modal-overlay" id="change-password-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Change Master Password</h2>
                <button class="modal-close" id="change-password-modal-close">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>
                </button>
            </div>
            <form id="change-password-form">
                <div class="form-group">
                    <label class="form-label">Current Password</label>
                    <div class="password-input-wrapper">
                        <input type="password" id="current-password" class="form-input"
                            placeholder="Enter current password" required>
                        <button type="button" class="password-toggle" data-target="current-password">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                                <circle cx="12" cy="12" r="3" />
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">New Password</label>
                    <div class="password-input-wrapper">
                        <input type="password" id="new-password" class="form-input" placeholder="Enter new password"
                            required minlength="8">
                        <button type="button" class="password-toggle" data-target="new-password">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                                <circle cx="12" cy="12" r="3" />
                            </svg>
                        </button>
                    </div>
                    <div class="strength-meter">
                        <div class="strength-bar">
                            <div class="strength-fill" id="new-password-strength"></div>
                        </div>
                        <span class="strength-label" id="new-password-label">Enter a password</span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Confirm New Password</label>
                    <div class="password-input-wrapper">
                        <input type="password" id="confirm-new-password" class="form-input"
                            placeholder="Confirm new password" required>
                        <button type="button" class="password-toggle" data-target="confirm-new-password">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                                <circle cx="12" cy="12" r="3" />
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="change-password-cancel">Cancel</button>
                    <button type="submit" class="btn btn-primary">Change Password</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Loading Overlay -->
    <div class="loading-overlay hidden" id="loading">
        <div class="spinner"></div>
    </div>

    <!-- Scripts -->
    <!-- CryptoJS fallback for HTTP (when Web Crypto API is not available) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.2.0/crypto-js.min.js"></script>
    <script src="js/crypto.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/backup.js"></script>
    <script src="js/sync.js"></script>
    <script src="js/app.js"></script>
</body>

</html>